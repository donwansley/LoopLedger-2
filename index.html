<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LoopLedger - Track Every Loop. Collect Every Ledger.</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body class="bg-gray-900 text-white font-sans">
    <!-- Loading Spinner -->
    <div id="loading" class="fixed inset-0 bg-gray-900 bg-opacity-90 flex items-center justify-center z-50">
        <div class="animate-spin rounded-full h-32 w-32 border-b-2 border-purple-500"></div>
    </div>

    <!-- Navigation -->
    <nav class="bg-gray-800 border-b border-gray-700 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <i class="fas fa-music text-purple-500 text-2xl mr-2"></i>
                        <span class="text-xl font-bold text-white">LoopLedger</span>
                    </div>
                    <div class="hidden md:block ml-10">
                        <div class="flex items-baseline space-x-4">
                            <a href="#" onclick="showSection('dashboard')" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700">Dashboard</a>
                            <a href="#" onclick="showSection('upload')" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700">Upload Songs</a>
                            <a href="#" onclick="showSection('integrations')" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700">Integrations</a>
                            <a href="#" onclick="showSection('reports')" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700">Reports</a>
                            <a href="#" onclick="showSection('billing')" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700">Billing</a>
                        </div>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div id="user-menu" class="hidden">
                        <span id="user-email" class="text-gray-300"></span>
                        <button onclick="signOut()" class="ml-4 bg-red-600 hover:bg-red-700 px-3 py-2 rounded-md text-sm">Sign Out</button>
                    </div>
                    <div id="auth-buttons">
                        <button onclick="showSection('login')" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-md text-sm font-medium">Sign In</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        <!-- Landing Section -->
        <div id="landing-section" class="section">
            <div class="text-center py-20">
                <h1 class="text-5xl font-bold mb-6 bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent">
                    Track Every Loop. Collect Every Ledger.
                </h1>
                <p class="text-xl text-gray-300 mb-8 max-w-3xl mx-auto">
                    Empower artists, managers, and labels to track royalties, manage song data, resolve unpaid earnings, and receive smart, AI-assisted guidance through every step of the music rights process.
                </p>
                <div class="flex justify-center space-x-4">
                    <button onclick="showSection('signup')" class="bg-purple-600 hover:bg-purple-700 px-8 py-3 rounded-lg text-lg font-semibold">Start Free Trial</button>
                    <button onclick="showSection('demo')" class="border border-gray-600 hover:border-gray-500 px-8 py-3 rounded-lg text-lg font-semibold">View Demo</button>
                </div>
            </div>

            <!-- Features Grid -->
            <div class="grid md:grid-cols-3 gap-8 mb-20">
                <div class="bg-gray-800 p-6 rounded-lg">
                    <i class="fas fa-chart-line text-purple-500 text-3xl mb-4"></i>
                    <h3 class="text-xl font-semibold mb-2">Real-time Royalty Tracking</h3>
                    <p class="text-gray-300">Connect to ASCAP, BMI, MLC, SoundExchange, and streaming platforms for comprehensive royalty monitoring.</p>
                </div>
                <div class="bg-gray-800 p-6 rounded-lg">
                    <i class="fas fa-robot text-purple-500 text-3xl mb-4"></i>
                    <h3 class="text-xl font-semibold mb-2">AI-Powered Assistant</h3>
                    <p class="text-gray-300">LoopBot provides intelligent guidance, onboarding help, and automated dispute resolution.</p>
                </div>
                <div class="bg-gray-800 p-6 rounded-lg">
                    <i class="fas fa-file-invoice-dollar text-purple-500 text-3xl mb-4"></i>
                    <h3 class="text-xl font-semibold mb-2">Automated Reports</h3>
                    <p class="text-gray-300">Generate detailed PDF/CSV reports with customizable schedules and email delivery.</p>
                </div>
            </div>

            <!-- Pricing Plans -->
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold mb-8">Choose Your Plan</h2>
                <div class="grid md:grid-cols-4 gap-6">
                    <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                        <h3 class="text-xl font-semibold mb-2">Free Trial</h3>
                        <p class="text-3xl font-bold mb-4">$0<span class="text-sm text-gray-400">/month</span></p>
                        <ul class="text-sm text-gray-300 mb-6 space-y-2">
                            <li>• 3 tracks</li>
                            <li>• 1 integration</li>
                            <li>• 1 report/month</li>
                        </ul>
                        <button onclick="startFreeTrial()" class="w-full bg-purple-600 hover:bg-purple-700 py-2 rounded">Start Free</button>
                    </div>
                    <div class="bg-gray-800 p-6 rounded-lg border border-purple-500">
                        <h3 class="text-xl font-semibold mb-2">Pro</h3>
                        <p class="text-3xl font-bold mb-4">$29<span class="text-sm text-gray-400">/month</span></p>
                        <ul class="text-sm text-gray-300 mb-6 space-y-2">
                            <li>• 50 tracks</li>
                            <li>• 3 integrations</li>
                            <li>• Unlimited reports</li>
                        </ul>
                        <button onclick="subscribeToPlan('pro')" class="w-full bg-purple-600 hover:bg-purple-700 py-2 rounded">Subscribe</button>
                    </div>
                    <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                        <h3 class="text-xl font-semibold mb-2">Business</h3>
                        <p class="text-3xl font-bold mb-4">$79<span class="text-sm text-gray-400">/month</span></p>
                        <ul class="text-sm text-gray-300 mb-6 space-y-2">
                            <li>• 200 tracks</li>
                            <li>• 5 integrations</li>
                            <li>• Concierge support</li>
                        </ul>
                        <button onclick="subscribeToPlan('business')" class="w-full bg-purple-600 hover:bg-purple-700 py-2 rounded">Subscribe</button>
                    </div>
                    <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                        <h3 class="text-xl font-semibold mb-2">Enterprise</h3>
                        <p class="text-3xl font-bold mb-4">$199+<span class="text-sm text-gray-400">/month</span></p>
                        <ul class="text-sm text-gray-300 mb-6 space-y-2">
                            <li>• 500+ tracks</li>
                            <li>• API access</li>
                            <li>• White-label</li>
                        </ul>
                        <button onclick="subscribeToPlan('enterprise')" class="w-full bg-purple-600 hover:bg-purple-700 py-2 rounded">Contact Sales</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Login Section -->
        <div id="login-section" class="section hidden">
            <div class="max-w-md mx-auto bg-gray-800 rounded-lg p-8">
                <h2 class="text-2xl font-bold mb-6 text-center">Sign In to LoopLedger</h2>
                <form id="login-form" onsubmit="signIn(event)">
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2">Email</label>
                        <input type="email" id="login-email" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2">Password</label>
                        <input type="password" id="login-password" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <button type="submit" class="w-full bg-purple-600 hover:bg-purple-700 py-2 rounded-md font-semibold">Sign In</button>
                </form>
                <p class="text-center mt-4 text-gray-400">
                    Don't have an account? 
                    <a href="#" onclick="showSection('signup')" class="text-purple-400 hover:text-purple-300">Sign up</a>
                </p>
            </div>
        </div>

        <!-- Signup Section -->
        <div id="signup-section" class="section hidden">
            <div class="max-w-md mx-auto bg-gray-800 rounded-lg p-8">
                <h2 class="text-2xl font-bold mb-6 text-center">Create Your Account</h2>
                <form id="signup-form" onsubmit="signUp(event)">
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2">Full Name</label>
                        <input type="text" id="signup-name" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2">Email</label>
                        <input type="email" id="signup-email" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2">Password</label>
                        <input type="password" id="signup-password" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <button type="submit" class="w-full bg-purple-600 hover:bg-purple-700 py-2 rounded-md font-semibold">Create Account</button>
                </form>
                <p class="text-center mt-4 text-gray-400">
                    Already have an account? 
                    <a href="#" onclick="showSection('login')" class="text-purple-400 hover:text-purple-300">Sign in</a>
                </p>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboard-section" class="section hidden">
            <div class="mb-8">
                <h1 class="text-3xl font-bold mb-2">Dashboard</h1>
                <p class="text-gray-400">Welcome back! Here's your royalty overview.</p>
            </div>

            <!-- Stats Grid -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-gray-800 p-6 rounded-lg">
                    <div class="flex items-center">
                        <div class="p-2 bg-purple-600 rounded-lg">
                            <i class="fas fa-dollar-sign text-white"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm text-gray-400">Total Earnings</p>
                            <p id="total-earnings" class="text-2xl font-bold">$0.00</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-800 p-6 rounded-lg">
                    <div class="flex items-center">
                        <div class="p-2 bg-green-600 rounded-lg">
                            <i class="fas fa-music text-white"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm text-gray-400">Songs Tracked</p>
                            <p id="songs-count" class="text-2xl font-bold">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-800 p-6 rounded-lg">
                    <div class="flex items-center">
                        <div class="p-2 bg-blue-600 rounded-lg">
                            <i class="fas fa-link text-white"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm text-gray-400">Connected Platforms</p>
                            <p id="platforms-count" class="text-2xl font-bold">0</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-800 p-6 rounded-lg">
                    <div class="flex items-center">
                        <div class="p-2 bg-yellow-600 rounded-lg">
                            <i class="fas fa-exclamation-triangle text-white"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm text-gray-400">Pending Issues</p>
                            <p id="issues-count" class="text-2xl font-bold">0</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <div class="bg-gray-800 p-6 rounded-lg">
                    <h3 class="text-lg font-semibold mb-4">Earnings Over Time</h3>
                    <canvas id="earnings-chart" width="400" height="200"></canvas>
                </div>
                <div class="bg-gray-800 p-6 rounded-lg">
                    <h3 class="text-lg font-semibold mb-4">Revenue Sources</h3>
                    <canvas id="sources-chart" width="400" height="200"></canvas>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="bg-gray-800 p-6 rounded-lg">
                <h3 class="text-lg font-semibold mb-4">Recent Activity</h3>
                <div id="recent-activity" class="space-y-4">
                    <p class="text-gray-400">No recent activity</p>
                </div>
            </div>
        </div>

        <!-- Upload Section -->
        <div id="upload-section" class="section hidden">
            <div class="mb-8">
                <h1 class="text-3xl font-bold mb-2">Upload Songs</h1>
                <p class="text-gray-400">Add your tracks to start tracking royalties.</p>
            </div>

            <div class="bg-gray-800 p-6 rounded-lg">
                <form id="song-upload-form" onsubmit="uploadSong(event)">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium mb-2">Song Title</label>
                            <input type="text" id="song-title" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Artist Name</label>
                            <input type="text" id="artist-name" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">ISRC Code</label>
                            <input type="text" id="isrc-code" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Release Date</label>
                            <input type="date" id="release-date" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Genre</label>
                            <select id="genre" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <option value="">Select Genre</option>
                                <option value="pop">Pop</option>
                                <option value="rock">Rock</option>
                                <option value="hip-hop">Hip-Hop</option>
                                <option value="electronic">Electronic</option>
                                <option value="country">Country</option>
                                <option value="jazz">Jazz</option>
                                <option value="classical">Classical</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Duration (seconds)</label>
                            <input type="number" id="duration" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                    </div>

                    <div class="mt-6">
                        <label class="block text-sm font-medium mb-2">Collaborators & Splits</label>
                        <div id="collaborators" class="space-y-3">
                            <div class="flex items-center space-x-3">
                                <input type="text" placeholder="Collaborator Name" class="flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <input type="number" placeholder="Split %" min="0" max="100" class="w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <button type="button" onclick="addCollaborator()" class="bg-green-600 hover:bg-green-700 px-3 py-2 rounded-md">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6">
                        <button type="submit" class="bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-md font-semibold">
                            <i class="fas fa-upload mr-2"></i>Upload Song
                        </button>
                    </div>
                </form>
            </div>

            <!-- Songs List -->
            <div class="mt-8 bg-gray-800 p-6 rounded-lg">
                <h3 class="text-lg font-semibold mb-4">Your Songs</h3>
                <div id="songs-list">
                    <p class="text-gray-400">No songs uploaded yet</p>
                </div>
            </div>
        </div>

        <!-- Integrations Section -->
        <div id="integrations-section" class="section hidden">
            <div class="mb-8">
                <h1 class="text-3xl font-bold mb-2">Platform Integrations</h1>
                <p class="text-gray-400">Connect your accounts to track royalties from all sources.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Spotify Integration -->
                <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center mb-4">
                        <i class="fab fa-spotify text-green-500 text-3xl mr-3"></i>
                        <div>
                            <h3 class="text-lg font-semibold">Spotify</h3>
                            <p class="text-sm text-gray-400">Streaming royalties</p>
                        </div>
                    </div>
                    <div id="spotify-status" class="mb-4">
                        <span class="inline-block px-2 py-1 bg-red-600 text-xs rounded">Disconnected</span>
                    </div>
                    <button onclick="connectSpotify()" class="w-full bg-green-600 hover:bg-green-700 py-2 rounded-md">
                        Connect Spotify
                    </button>
                </div>

                <!-- YouTube Integration -->
                <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center mb-4">
                        <i class="fab fa-youtube text-red-500 text-3xl mr-3"></i>
                        <div>
                            <h3 class="text-lg font-semibold">YouTube</h3>
                            <p class="text-sm text-gray-400">Video monetization</p>
                        </div>
                    </div>
                    <div id="youtube-status" class="mb-4">
                        <span class="inline-block px-2 py-1 bg-red-600 text-xs rounded">Disconnected</span>
                    </div>
                    <button onclick="connectYouTube()" class="w-full bg-red-600 hover:bg-red-700 py-2 rounded-md">
                        Connect YouTube
                    </button>
                </div>

                <!-- Apple Music Integration -->
                <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center mb-4">
                        <i class="fab fa-apple text-gray-300 text-3xl mr-3"></i>
                        <div>
                            <h3 class="text-lg font-semibold">Apple Music</h3>
                            <p class="text-sm text-gray-400">Streaming royalties</p>
                        </div>
                    </div>
                    <div id="apple-status" class="mb-4">
                        <span class="inline-block px-2 py-1 bg-red-600 text-xs rounded">Disconnected</span>
                    </div>
                    <button onclick="connectApple()" class="w-full bg-gray-600 hover:bg-gray-700 py-2 rounded-md">
                        Connect Apple Music
                    </button>
                </div>

                <!-- ASCAP Integration -->
                <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-file-contract text-blue-500 text-3xl mr-3"></i>
                        <div>
                            <h3 class="text-lg font-semibold">ASCAP</h3>
                            <p class="text-sm text-gray-400">Performance royalties</p>
                        </div>
                    </div>
                    <div id="ascap-status" class="mb-4">
                        <span class="inline-block px-2 py-1 bg-red-600 text-xs rounded">Disconnected</span>
                    </div>
                    <button onclick="connectASCAP()" class="w-full bg-blue-600 hover:bg-blue-700 py-2 rounded-md">
                        Connect ASCAP
                    </button>
                </div>

                <!-- BMI Integration -->
                <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-music text-purple-500 text-3xl mr-3"></i>
                        <div>
                            <h3 class="text-lg font-semibold">BMI</h3>
                            <p class="text-sm text-gray-400">Performance royalties</p>
                        </div>
                    </div>
                    <div id="bmi-status" class="mb-4">
                        <span class="inline-block px-2 py-1 bg-red-600 text-xs rounded">Disconnected</span>
                    </div>
                    <button onclick="connectBMI()" class="w-full bg-purple-600 hover:bg-purple-700 py-2 rounded-md">
                        Connect BMI
                    </button>
                </div>

                <!-- MLC Integration -->
                <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-cog text-yellow-500 text-3xl mr-3"></i>
                        <div>
                            <h3 class="text-lg font-semibold">The MLC</h3>
                            <p class="text-sm text-gray-400">Mechanical royalties</p>
                        </div>
                    </div>
                    <div id="mlc-status" class="mb-4">
                        <span class="inline-block px-2 py-1 bg-red-600 text-xs rounded">Disconnected</span>
                    </div>
                    <button onclick="connectMLC()" class="w-full bg-yellow-600 hover:bg-yellow-700 py-2 rounded-md">
                        Connect MLC
                    </button>
                </div>
            </div>

            <!-- Integration Instructions -->
            <div class="mt-8 bg-gray-800 p-6 rounded-lg">
                <h3 class="text-lg font-semibold mb-4">Integration Setup</h3>
                <div class="space-y-4">
                    <div class="p-4 bg-blue-900 bg-opacity-30 border border-blue-700 rounded-lg">
                        <h4 class="font-semibold text-blue-300 mb-2">Real API Connections</h4>
                        <p class="text-sm text-gray-300">
                            Click any platform above to connect your real accounts. We use OAuth2 secure authentication to access your royalty data safely.
                        </p>
                    </div>
                    <div class="p-4 bg-green-900 bg-opacity-30 border border-green-700 rounded-lg">
                        <h4 class="font-semibold text-green-300 mb-2">Data Sync</h4>
                        <p class="text-sm text-gray-300">
                            Once connected, we automatically sync your royalty data every 24 hours. You can also manually refresh at any time.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reports Section -->
        <div id="reports-section" class="section hidden">
            <div class="mb-8">
                <h1 class="text-3xl font-bold mb-2">Reports</h1>
                <p class="text-gray-400">Generate detailed royalty reports for your music.</p>
            </div>

            <!-- Report Generator -->
            <div class="bg-gray-800 p-6 rounded-lg mb-8">
                <h3 class="text-lg font-semibold mb-4">Generate New Report</h3>
                <form id="report-form" onsubmit="generateReport(event)">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Report Type</label>
                            <select id="report-type" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <option value="earnings">Earnings Summary</option>
                                <option value="detailed">Detailed Breakdown</option>
                                <option value="platform">Platform Comparison</option>
                                <option value="trends">Trend Analysis</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Date Range</label>
                            <select id="date-range" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <option value="last-month">Last Month</option>
                                <option value="last-quarter">Last Quarter</option>
                                <option value="last-year">Last Year</option>
                                <option value="custom">Custom Range</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Format</label>
                            <select id="report-format" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <option value="pdf">PDF</option>
                                <option value="csv">CSV</option>
                                <option value="xlsx">Excel</option>
                            </select>
                        </div>
                    </div>
                    <div class="mt-4">
                        <button type="submit" class="bg-purple-600 hover:bg-purple-700 px-6 py-2 rounded-md">
                            <i class="fas fa-file-export mr-2"></i>Generate Report
                        </button>
                    </div>
                </form>
            </div>

            <!-- Scheduled Reports -->
            <div class="bg-gray-800 p-6 rounded-lg mb-8">
                <h3 class="text-lg font-semibold mb-4">Scheduled Reports</h3>
                <div class="flex justify-between items-center mb-4">
                    <p class="text-gray-400">Automatically generated reports</p>
                    <button onclick="showScheduleModal()" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-md text-sm">
                        <i class="fas fa-plus mr-2"></i>Schedule Report
                    </button>
                </div>
                <div id="scheduled-reports" class="space-y-3">
                    <p class="text-gray-400">No scheduled reports</p>
                </div>
            </div>

            <!-- Recent Reports -->
            <div class="bg-gray-800 p-6 rounded-lg">
                <h3 class="text-lg font-semibold mb-4">Recent Reports</h3>
                <div id="recent-reports" class="space-y-3">
                    <p class="text-gray-400">No reports generated yet</p>
                </div>
            </div>
        </div>

        <!-- Billing Section -->
        <div id="billing-section" class="section hidden">
            <div class="mb-8">
                <h1 class="text-3xl font-bold mb-2">Billing & Subscription</h1>
                <p class="text-gray-400">Manage your subscription and payment methods.</p>
            </div>

            <!-- Current Plan -->
            <div class="bg-gray-800 p-6 rounded-lg mb-8">
                <h3 class="text-lg font-semibold mb-4">Current Plan</h3>
                <div class="flex justify-between items-center">
                    <div>
                        <p class="text-xl font-semibold" id="current-plan">Free Trial</p>
                        <p class="text-gray-400" id="plan-details">3 tracks, 1 integration, 1 report/month</p>
                        <p class="text-sm text-gray-500" id="billing-cycle">Expires in 14 days</p>
                    </div>
                    <div class="text-right">
                        <p class="text-2xl font-bold" id="plan-price">$0.00</p>
                        <p class="text-sm text-gray-400">per month</p>
                    </div>
                </div>
                <div class="mt-4">
                    <button onclick="showUpgradeModal()" class="bg-purple-600 hover:bg-purple-700 px-6 py-2 rounded-md">
                        Upgrade Plan
                    </button>
                </div>
            </div>

            <!-- Usage Stats -->
            <div class="bg-gray-800 p-6 rounded-lg mb-8">
                <h3 class="text-lg font-semibold mb-4">Usage This Month</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <p class="text-sm text-gray-400">Tracks Uploaded</p>
                        <div class="flex items-center mt-2">
                            <div class="w-full bg-gray-700 rounded-full h-2">
                                <div class="bg-purple-600 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                            <span class="ml-2 text-sm">0/3</span>
                        </div>
                    </div>
                    <div>
                        <p class="text-sm text-gray-400">Integrations</p>
                        <div class="flex items-center mt-2">
                            <div class="w-full bg-gray-700 rounded-full h-2">
                                <div class="bg-purple-600 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                            <span class="ml-2 text-sm">0/1</span>
                        </div>
                    </div>
                    <div>
                        <p class="text-sm text-gray-400">Reports Generated</p>
                        <div class="flex items-center mt-2">
                            <div class="w-full bg-gray-700 rounded-full h-2">
                                <div class="bg-purple-600 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                            <span class="ml-2 text-sm">0/1</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Payment Method -->
            <div class="bg-gray-800 p-6 rounded-lg">
                <h3 class="text-lg font-semibold mb-4">Payment Method</h3>
                <div id="payment-method">
                    <p class="text-gray-400">No payment method on file</p>
                    <button onclick="addPaymentMethod()" class="mt-4 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md">
                        Add Payment Method
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- LoopBot Chatbot -->
    <div id="chatbot" class="fixed bottom-4 right-4 z-50">
        <button onclick="toggleChat()" class="bg-purple-600 hover:bg-purple-700 rounded-full p-4 shadow-lg">
            <i class="fas fa-robot text-white text-xl"></i>
        </button>
    </div>

    <div id="chat-window" class="fixed bottom-20 right-4 w-80 h-96 bg-gray-800 rounded-lg shadow-xl border border-gray-700 hidden z-50">
        <div class="flex items-center justify-between p-4 border-b border-gray-700">
            <div class="flex items-center">
                <i class="fas fa-robot text-purple-500 mr-2"></i>
                <span class="font-semibold">LoopBot</span>
            </div>
            <button onclick="toggleChat()" class="text-gray-400 hover:text-white">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div id="chat-messages" class="p-4 h-64 overflow-y-auto">
            <div class="mb-4">
                <div class="bg-purple-600 text-white p-3 rounded-lg max-w-xs">
                    <p class="text-sm">Hi! I'm LoopBot, your AI assistant. How can I help you today?</p>
                </div>
            </div>
        </div>
        <div class="p-4 border-t border-gray-700">
            <div class="flex">
                <input type="text" id="chat-input" placeholder="Ask me anything..." class="flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded-l-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                <button onclick="sendMessage()" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-r-md">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="modal-overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50" onclick="closeModal()">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div id="modal-content" class="bg-gray-800 rounded-lg p-6 max-w-md w-full" onclick="event.stopPropagation()">
                <!-- Modal content will be inserted here -->
            </div>
        </div>
    </div>

    <script>
        // Supabase Configuration
        const supabaseUrl = 'https://your-project.supabase.co'; // Replace with your Supabase URL
        const supabaseKey = 'your-anon-key'; // Replace with your Supabase anon key
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        // Stripe Configuration
        const stripe = Stripe('pk_test_your_publishable_key'); // Replace with your Stripe publishable key

        // Global State
        let currentUser = null;
        let songs = [];
        let integrations = {};

        // Initialize App
        document.addEventListener('DOMContentLoaded', async () => {
            hideLoading();
            await checkAuth();
            initializeCharts();
            setupEventListeners();
        });

        // Authentication Functions
        async function checkAuth() {
            const { data: { session } } = await supabase.auth.getSession();
            if (session) {
                currentUser = session.user;
                updateUIForUser(currentUser);
                showSection('dashboard');
                await loadUserData();
            } else {
                showSection('landing');
            }
        }

        async function signUp(event) {
            event.preventDefault();
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const name = document.getElementById('signup-name').value;

            try {
                const { data, error } = await supabase.auth.signUp({
                    email: email,
                    password: password,
                    options: {
                        data: {
                            full_name: name
                        }
                    }
                });

                if (error) throw error;

                showNotification('Account created! Please check your email to verify.', 'success');
                showSection('login');
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        async function signIn(event) {
            event.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            try {
                const { data, error } = await supabase.auth.signInWithPassword({
                    email: email,
                    password: password
                });

                if (error) throw error;

                currentUser = data.user;
                updateUIForUser(currentUser);
                showSection('dashboard');
                await loadUserData();
                showNotification('Welcome back!', 'success');
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        async function signOut() {
            await supabase.auth.signOut();
            currentUser = null;
            updateUIForUser(null);
            showSection('landing');
            showNotification('Signed out successfully', 'success');
        }

        function updateUIForUser(user) {
            const userMenu = document.getElementById('user-menu');
            const authButtons = document.getElementById('auth-buttons');
            
            if (user) {
                document.getElementById('user-email').textContent = user.email;
                userMenu.classList.remove('hidden');
                authButtons.classList.add('hidden');
            } else {
                userMenu.classList.add('hidden');
                authButtons.classList.remove('hidden');
            }
        }

        // Database Functions
        async function loadUserData() {
            if (!currentUser) return;

            try {
                // Load songs
                const { data: songsData, error: songsError } = await supabase
                    .from('songs')
                    .select('*')
                    .eq('user_id', currentUser.id);

                if (songsError) throw songsError;
                songs = songsData || [];

                // Load integrations
                const { data: integrationsData, error: integrationsError } = await supabase
                    .from('integrations')
                    .select('*')
                    .eq('user_id', currentUser.id);

                if (integrationsError) throw integrationsError;
                integrations = {};
                (integrationsData || []).forEach(integration => {
                    integrations[integration.platform] = integration;
                });

                updateDashboard();
                updateSongsList();
                updateIntegrationsStatus();
            } catch (error) {
                console.error('Error loading user data:', error);
            }
        }

        async function uploadSong(event) {
            event.preventDefault();
            if (!currentUser) return;

            const songData = {
                user_id: currentUser.id,
                title: document.getElementById('song-title').value,
                artist: document.getElementById('artist-name').value,
                isrc: document.getElementById('isrc-code').value,
                release_date: document.getElementById('release-date').value,
                genre: document.getElementById('genre').value,
                duration: parseInt(document.getElementById('duration').value) || 0,
                created_at: new Date().toISOString()
            };

            try {
                const { data, error } = await supabase
                    .from('songs')
                    .insert([songData])
                    .select();

                if (error) throw error;

                songs.push(data[0]);
                updateSongsList();
                updateDashboard();
                document.getElementById('song-upload-form').reset();
                showNotification('Song uploaded successfully!', 'success');
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        // Platform Integration Functions
        async function connectSpotify() {
            try {
                // Simulate OAuth flow
                showNotification('Redirecting to Spotify...', 'info');
                
                // In a real implementation, this would redirect to Spotify OAuth
                setTimeout(async () => {
                    const integrationData = {
                        user_id: currentUser.id,
                        platform: 'spotify',
                        access_token: 'mock_token_' + Date.now(),
                        refresh_token: 'mock_refresh_' + Date.now(),
                        status: 'connected',
                        connected_at: new Date().toISOString()
                    };

                    const { data, error } = await supabase
                        .from('integrations')
                        .upsert([integrationData])
                        .select();

                    if (error) throw error;

                    integrations.spotify = data[0];
                    updateIntegrationsStatus();
                    showNotification('Spotify connected successfully!', 'success');
                }, 1000);
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        async function connectYouTube() {
            // Similar implementation for YouTube
            try {
                showNotification('Redirecting to YouTube...', 'info');
                
                setTimeout(async () => {
                    const integrationData = {
                        user_id: currentUser.id,
                        platform: 'youtube',
                        access_token: 'mock_yt_token_' + Date.now(),
                        status: 'connected',
                        connected_at: new Date().toISOString()
                    };

                    const { data, error } = await supabase
                        .from('integrations')
                        .upsert([integrationData])
                        .select();

                    if (error) throw error;

                    integrations.youtube = data[0];
                    updateIntegrationsStatus();
                    showNotification('YouTube connected successfully!', 'success');
                }, 1000);
            } catch (error) {
                showNotification(error.message, 'error');
            }
        }

        async function connectApple() {
            showNotification('Apple Music integration coming soon!', 'info');
        }

        async function connectASCAP() {
            showNotification('ASCAP integration in development', 'info');
        }

        async function connectBMI() {
            showNotification('BMI integration in development', 'info');
        }

        async function connectMLC() {
            showNotification('MLC integration in development', 'info');
        }

        // UI Update Functions
        function updateDashboard() {
            document.getElementById('songs-count').textContent = songs.length;
            document.getElementById('platforms-count').textContent = Object.keys(integrations).length;
            
            // Calculate mock earnings
            const totalEarnings = songs.length * 125.50; // Mock calculation
            document.getElementById('total-earnings').textContent = `$${totalEarnings.toFixed(2)}`;
            
            // Update charts with real data
            updateCharts();
        }

        function updateSongsList() {
            const container = document.getElementById('songs-list');
            if (songs.length === 0) {
                container.innerHTML = '<p class="text-gray-400">No songs uploaded yet</p>';
                return;
            }

            container.innerHTML = songs.map(song => `
                <div class="flex items-center justify-between p-4 bg-gray-700 rounded-lg mb-3">
                    <div>
                        <h4 class="font-semibold">${song.title}</h4>
                        <p class="text-sm text-gray-400">by ${song.artist}</p>
                        <p class="text-xs text-gray-500">${song.genre} • ${new Date(song.created_at).toLocaleDateString()}</p>
                    </div>
                    <div class="text-right">
                        <p class="text-sm font-semibold text-green-400">$${(Math.random() * 100).toFixed(2)}</p>
                        <p class="text-xs text-gray-500">Total Earned</p>
                    </div>
                </div>
            `).join('');
        }

        function updateIntegrationsStatus() {
            const platforms = ['spotify', 'youtube', 'apple', 'ascap', 'bmi', 'mlc'];
            
            platforms.forEach(platform => {
                const statusElement = document.getElementById(`${platform}-status`);
                if (statusElement) {
                    if (integrations[platform] && integrations[platform].status === 'connected') {
                        statusElement.innerHTML = '<span class="inline-block px-2 py-1 bg-green-600 text-xs rounded">Connected</span>';
                    } else {
                        statusElement.innerHTML = '<span class="inline-block px-2 py-1 bg-red-600 text-xs rounded">Disconnected</span>';
                    }
                }
            });
        }

        // Charts
        function initializeCharts() {
            // Earnings Chart
            const earningsCtx = document.getElementById('earnings-chart');
            if (earningsCtx) {
                new Chart(earningsCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Earnings',
                            data: [0, 0, 0, 0, 0, 0],
                            borderColor: 'rgb(168, 85, 247)',
                            backgroundColor: 'rgba(168, 85, 247, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                labels: {
                                    color: 'rgb(156, 163, 175)'
                                }
                            }
                        },
                        scales: {
                            y: {
                                grid: {
                                    color: 'rgba(75, 85, 99, 0.3)'
                                },
                                ticks: {
                                    color: 'rgb(156, 163, 175)'
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(75, 85, 99, 0.3)'
                                },
                                ticks: {
                                    color: 'rgb(156, 163, 175)'
                                }
                            }
                        }
                    }
                });
            }

            // Sources Chart
            const sourcesCtx = document.getElementById('sources-chart');
            if (sourcesCtx) {
                new Chart(sourcesCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Spotify', 'Apple Music', 'YouTube', 'Other'],
                        datasets: [{
                            data: [0, 0, 0, 0],
                            backgroundColor: [
                                'rgb(34, 197, 94)',
                                'rgb(156, 163, 175)',
                                'rgb(239, 68, 68)',
                                'rgb(168, 85, 247)'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                labels: {
                                    color: 'rgb(156, 163, 175)'
                                }
                            }
                        }
                    }
                });
            }
        }

        function updateCharts() {
            // Update charts with real data when available
            // This would be implemented based on actual royalty data
        }

        // Billing Functions
        async function subscribeToPlan(plan) {
            if (!currentUser) {
                showSection('login');
                return;
            }

            const prices = {
                pro: 29,
                business: 79,
                enterprise: 199
            };

            try {
                // Create Stripe checkout session
                const response = await fetch('/create-checkout-session', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        plan: plan,
                        price: prices[plan],
                        user_id: currentUser.id
                    })
                });

                const session = await response.json();
                
                if (session.url) {
                    window.location.href = session.url;
                } else {
                    // Fallback for demo
                    showNotification(`Upgrading to ${plan} plan... (Demo mode)`, 'success');
                }
            } catch (error) {
                showNotification('Payment processing error. Please try again.', 'error');
            }
        }

        function startFreeTrial() {
            showSection('signup');
        }

        // Report Functions
        async function generateReport(event) {
            event.preventDefault();
            
            const reportType = document.getElementById('report-type').value;
            const dateRange = document.getElementById('date-range').value;
            const format = document.getElementById('report-format').value;

            showNotification('Generating report...', 'info');

            // Simulate report generation
            setTimeout(() => {
                const reportData = {
                    id: Date.now(),
                    type: reportType,
                    date_range: dateRange,
                    format: format,
                    created_at: new Date().toISOString(),
                    download_url: '#'
                };

                addReportToList(reportData);
                showNotification('Report generated successfully!', 'success');
            }, 2000);
        }

        function addReportToList(report) {
            const container = document.getElementById('recent-reports');
            const reportElement = document.createElement('div');
            reportElement.className = 'flex items-center justify-between p-3 bg-gray-700 rounded-lg';
            reportElement.innerHTML = `
                <div>
                    <p class="font-medium">${report.type} Report</p>
                    <p class="text-sm text-gray-400">${report.date_range} • ${report.format.toUpperCase()}</p>
                </div>
                <button onclick="downloadReport('${report.id}')" class="bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm">
                    <i class="fas fa-download mr-1"></i>Download
                </button>
            `;
            
            if (container.querySelector('p')) {
                container.innerHTML = '';
            }
            container.appendChild(reportElement);
        }

        function downloadReport(reportId) {
            showNotification('Downloading report...', 'info');
        }

        // Chat Functions
        function toggleChat() {
            const chatWindow = document.getElementById('chat-window');
            chatWindow.classList.toggle('hidden');
        }

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) return;

            addMessageToChat(message, 'user');
            input.value = '';

            // Simulate bot response
            setTimeout(() => {
                const responses = [
                    "I'd be happy to help! Can you tell me more about what you're looking for?",
                    "To connect your Spotify account, go to the Integrations section and click 'Connect Spotify'.",
                    "You can upload songs in the Upload section. Make sure to include all metadata for better tracking.",
                    "For royalty questions, I recommend checking your dashboard for the latest earnings data.",
                    "Would you like me to schedule a discovery call with our team?"
                ];
                
                const response = responses[Math.floor(Math.random() * responses.length)];
                addMessageToChat(response, 'bot');
            }, 1000);
        }

        function addMessageToChat(message, sender) {
            const container = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'mb-4';
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="flex justify-end">
                        <div class="bg-gray-600 text-white p-3 rounded-lg max-w-xs">
                            <p class="text-sm">${message}</p>
                        </div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="bg-purple-600 text-white p-3 rounded-lg max-w-xs">
                        <p class="text-sm">${message}</p>
                    </div>
                `;
            }
            
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        }

        // Utility Functions
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });

            // Show target section
            const targetSection = document.getElementById(`${sectionName}-section`);
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }

            // Update navigation active states
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('bg-gray-700', 'text-white');
                link.classList.add('text-gray-300');
            });
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 p-4 rounded-lg text-white z-50 ${
                type === 'success' ? 'bg-green-600' :
                type === 'error' ? 'bg-red-600' :
                type === 'warning' ? 'bg-yellow-600' :
                'bg-blue-600'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }

        function setupEventListeners() {
            // Chat input enter key
            document.getElementById('chat-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            // Supabase auth state changes
            supabase.auth.onAuthStateChange((event, session) => {
                if (event === 'SIGNED_IN') {
                    currentUser = session.user;
                    updateUIForUser(currentUser);
                    loadUserData();
                } else if (event === 'SIGNED_OUT') {
                    currentUser = null;
                    updateUIForUser(null);
                }
            });
        }

        // Add collaborator function
        function addCollaborator() {
            const container = document.getElementById('collaborators');
            const newCollaborator = document.createElement('div');
            newCollaborator.className = 'flex items-center space-x-3';
            newCollaborator.innerHTML = `
                <input type="text" placeholder="Collaborator Name" class="flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                <input type="number" placeholder="Split %" min="0" max="100" class="w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                <button type="button" onclick="this.parentElement.remove()" class="bg-red-600 hover:bg-red-700 px-3 py-2 rounded-md">
                    <i class="fas fa-minus"></i>
                </button>
            `;
            container.appendChild(newCollaborator);
        }

        // Modal functions
        function showModal(content) {
            document.getElementById('modal-content').innerHTML = content;
            document.getElementById('modal-overlay').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('modal-overlay').classList.add('hidden');
        }

        function showUpgradeModal() {
            const content = `
                <h3 class="text-lg font-semibold mb-4">Upgrade Your Plan</h3>
                <div class="space-y-4">
                    <div class="p-4 border border-purple-500 rounded-lg">
                        <h4 class="font-semibold">Pro Plan - $29/month</h4>
                        <p class="text-sm text-gray-400">50 tracks, 3 integrations, unlimited reports</p>
                        <button onclick="subscribeToPlan('pro')" class="mt-2 w-full bg-purple-600 hover:bg-purple-700 py-2 rounded">
                            Upgrade to Pro
                        </button>
                    </div>
                    <div class="p-4 border border-gray-600 rounded-lg">
                        <h4 class="font-semibold">Business Plan - $79/month</h4>
                        <p class="text-sm text-gray-400">200 tracks, 5 integrations, concierge support</p>
                        <button onclick="subscribeToPlan('business')" class="mt-2 w-full bg-purple-600 hover:bg-purple-700 py-2 rounded">
                            Upgrade to Business
                        </button>
                    </div>
                </div>
                <button onclick="closeModal()" class="mt-4 w-full bg-gray-600 hover:bg-gray-700 py-2 rounded">
                    Cancel
                </button>
            `;
            showModal(content);
        }

        function addPaymentMethod() {
            showNotification('Payment method setup coming soon!', 'info');
        }

        function showScheduleModal() {
            const content = `
                <h3 class="text-lg font-semibold mb-4">Schedule Report</h3>
                <form onsubmit="scheduleReport(event)">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Report Type</label>
                            <select class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md">
                                <option value="earnings">Earnings Summary</option>
                                <option value="detailed">Detailed Breakdown</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Frequency</label>
                            <select class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md">
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                                <option value="quarterly">Quarterly</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Email Address</label>
                            <input type="email" value="${currentUser?.email || ''}" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md">
                        </div>
                    </div>
                    <div class="mt-6 flex space-x-3">
                        <button type="submit" class="flex-1 bg-purple-600 hover:bg-purple-700 py-2 rounded">
                            Schedule Report
                        </button>
                        <button type="button" onclick="closeModal()" class="flex-1 bg-gray-600 hover:bg-gray-700 py-2 rounded">
                            Cancel
                        </button>
                    </div>
                </form>
            `;
            showModal(content);
        }

        function scheduleReport(event) {
            event.preventDefault();
            showNotification('Report scheduled successfully!', 'success');
            closeModal();
        }

        // Initialize app when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                hideLoading();
            });
        } else {
            hideLoading();
        }
    </script>
</body>
</html>

    
